# Виджет банковских операций клиента

## Описание
Проект представляет собой консольное приложение для анализа банковских операций клиента. Оно позволяет:
- Просматривать основные финансовые данные (траты, кэшбэк, курсы валют и т.д.)
- Анализировать расходы по категориям
- Определять наиболее выгодные категории для кэшбэка

**Статус разработки:** в разработке  
**Coverage report:** 90%

| File               | Statements | Missing | Excluded | Coverage |
|--------------------|------------|---------|----------|----------|
| `src/__init__.py`  | 0          | 0       | 0        | 100%     |
| `src/main.py`      | 108        | 5       | 0        | 95%      |
| `src/reports.py`   | 70         | 5       | 0        | 93%      |
| `src/services.py`  | 50         | 6       | 0        | 88%      |
| `src/utils.py`     | 397        | 49      | 0        | 88%      |
| `src/views.py`     | 37         | 4       | 0        | 89%      |
| **Total**          | **662**    | **69**  | **0**    | **90%**  |

*Generated by coverage.py v7.8.0 on 2025-05-05*

## Установка
1. Клонируйте репозиторий:

```
git clone https://github.com/MamchitsAnastasia/SkyPro_lessons.git
```

2. Установите зависимости:
- Python 3.9+
- Зависимости: `requests`, `pandas`, `python-dotenv`
```
pip install -r requirements.txt
```

3. Создайте файл `.env` в корне проекта с API-ключами:
```
EXCHANGE_RATES_API_KEY=ваш_ключ
STOCK_API_KEY=ваш_ключ
```

## Использование
Запустите выполнение функции:
```
src.main.py
```

### Основные функции:
1. **Главное меню**  
   - Автоматически показывает:
     - Приветствие (в зависимости от времени суток)
     - Список трат по картам за текущий месяц
     - Топ-5 транзакций
     - Курсы валют
     - Цены акций

2. **Дополнительные отчёты**  
   - Операции по категории за последние 3 месяца
   - Наиболее выгодные категории кэшбэка за выбранный месяц

### Пример работы:
```
Добрый день!

Список трат за текущий месяц:
Карта ****5568: потрачено 15000, кэшбэк 150
Карта ****1234: потрачено 20000, кэшбэк 200

Топ-5 транзакций за текущий месяц:
1. 23.12.2021 - 28001.94 (Переводы/Перевод Кредитная карта. ТП 10.2 RUR)
2. 23.12.2021 - 20000.0 (Другое/Иван С.)
3. 05.12.2021 - 3500.0 (Пополнения/Внесение наличных через банкомат Тинькофф)
4. 12.12.2021 - 1721.38 (Каршеринг/Ситидрайв)
5. 21.12.2021 - 1198.23 (Переводы/Перевод Кредитная карта. ТП 10.2 RUR)

Курсы валют:
USD: 82.92 RUB
EUR: 93.75 RUB

Цены акций:
AAPL: 205.35 USD
AMZN: 189.98 USD
GOOGL: 164.03 USD
MSFT: 435.28 USD
TSLA: 287.21 USD

Хотите получить дополнительный отчет?
1 - Операции по категории за последние 3 месяца с необходимой даты
2 - Наиболее выгодные категории кэшбэка за месяц
0 - Выход
```

## Структура проекта
```
.
├── data/                         # Данные
│   ├── operations.xlsx           # Банковские операции
│   └── user_settings.json        # Настройки пользователя
├── logs/                         # Логи работы
├── src/                          # Исходный код
│   ├── services.py               # Бизнес-логика
│   ├── views.py                  # Представления
│   ├── reports.py                # Отчёты
│   ├── utils.py                  # Вспомогательные функции
│   └── main.py                   # Точка входа
├── tests/                        # Тесты
└── README.md                     # Документация
```

## Основные модули

### `main.py`
- Точка входа в приложение
- Обрабатывает пользовательский ввод
- Координирует работу других модулей

### `views.py`
- Формирует основное представление данных
- Включает:
  - Приветствие
  - Информацию по картам
  - Топ транзакций
  - Курсы валют и акций

### `services.py`
- Бизнес-логика:
  - Анализ категорий кэшбэка
  - Обработка временных периодов

### `reports.py`
- Генерация отчётов:
  - Расходы по категориям
  - Сохранение отчётов в JSON

### `utils.py`
- Вспомогательные функции:
  - Работа с датами
  - Логирование
  - Запросы к API
  - Обработка данных
  - 
## ToDo:
В тестовых данных последняя дата 31.12.2021 16:44:00  
Если загружаемые данные актуальны на данный момент -  
необходимо в main переменной DATE_NOW присвоить значение  
datetime.now().strftime("%Y-%m-%d %H:%M:%S")

## Лицензия
Проект лицензирован по [лицензии MIT](LICENSE).

Автор: [Мамчиц Анастасия](https://github.com/MamchitsAnastasia)
```